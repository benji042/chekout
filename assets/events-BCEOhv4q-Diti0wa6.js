var p={exports:{}},E;function T(){if(E)return p.exports;E=1;var c=typeof Reflect=="object"?Reflect:null,l=c&&typeof c.apply=="function"?c.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},v;c&&typeof c.ownKeys=="function"?v=c.ownKeys:Object.getOwnPropertySymbols?v=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:v=function(e){return Object.getOwnPropertyNames(e)};function O(e){console&&console.warn&&console.warn(e)}var h=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}p.exports=s,p.exports.once=M,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var y=10;function a(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(e){if(typeof e!="number"||e<0||h(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");y=e}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||h(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function m(e){return e._maxListeners===void 0?s.defaultMaxListeners:e._maxListeners}s.prototype.getMaxListeners=function(){return m(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=e==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var f=i[e];if(f===void 0)return!1;if(typeof f=="function")l(f,this,t);else for(var x=f.length,N=w(f,x),n=0;n<x;++n)l(N[n],this,t);return!0};function d(e,t,n,r){var i,o,u;if(a(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),u=o[t]),u===void 0)u=o[t]=n,++e._eventsCount;else if(typeof u=="function"?u=o[t]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),i=m(e),i>0&&u.length>i&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=u.length,O(f)}return e}s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)};function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=j.bind(r);return i.listener=n,r.wrapFn=i,i}s.prototype.once=function(e,t){return a(t),this.on(e,g(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,g(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,u;if(a(t),r=this._events,r===void 0)return this;if(n=r[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){u=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():C(n,i),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",e,u||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(r=0;r<i.length;++r)o=i[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function L(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?R(i):w(i,i.length)}s.prototype.listeners=function(e){return L(this,e,!0)},s.prototype.rawListeners=function(e){return L(this,e,!1)},s.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):_.call(e,t)},s.prototype.listenerCount=_;function _(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]};function w(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function C(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function R(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function M(e,t){return new Promise(function(n,r){function i(u){e.removeListener(t,o),r(u)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}b(e,t,o,{once:!0}),t!=="error"&&P(e,i,{once:!0})})}function P(e,t,n){typeof e.on=="function"&&b(e,"error",t,n)}function b(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}return p.exports}export{T};
